<!--
Update the file paths as needed throughout
-->

<!--
This file has ....
data import,
data exploration/wrangling,
data visualization,
and data analysis sections.

At the end of each section, save incremental data so that users can pause and come back later
-->

# **Data Import**
***

<!--
Describe how to import the case study data files into R or Python
-->

<!--
Within your case study project folder,
put the data files as they came from the source into a 'data/raw/' subfolder
and use the `here` package. See the following example and update with your data:
-->

```{r}
pm <-readr::read_csv(here("data", "raw", "pm25_data.csv"))
```

<!--
At the end of the data import section, save the imported data as .rda files
to allow users to stop and pick up where they left off:
-->

```{r}
save(pm, file = here::here("data", "imported", "pm25_data_imported.rda"))
```

<!--
NOTE that depending on the size of the data for Bio-OCS, the data may not be in the case study project folder directly
and may need to be imported from an external source
-->

***

# **Data Exploration and Wrangling**
***

If you have been following along but stopped, we could load our imported data like so:

```{r}
load(here::here("data", "imported", "pm25_data_imported.rda"))
```
***

***
<details> <summary> If you skipped the data import section click here. </summary>

An RDA version (stands for R data) of the data can be found [here](https://github.com//opencasestudies/ocs-bp-co2-emissions/tree/master/data/imported) or slightly more directly [here](https://raw.githubusercontent.com/opencasestudies/ocs-bp-co2-emissions/master/data/imported/co2_data_imported.rda). Download this file and then place it in your current working directory within a subdirectory called "imported" within a directory called "data" to use the following code. We used an RStudio project and the [`here` package](https://github.com/jennybc/here_here) to navigate to the file more easily.

```{r, eval=FALSE}
load(here::here("data", "imported", "co2_data_imported.rda"))
```

</details>
***

<!--
Use this section to walk through any exploration of the data conducted pre-analysis.
Then, explain step-by-step the data wrangling process used to prepare the data for analysis.
Note that not all case studies include a data exploration.
Data exploration and wrangling may also be split into two sections.
-->

To allow users to skip import and wrangling we will save the data as an RDA file as well as a CSV file as this is often useful to send our data to collaborators. We will save this in a “wrangled” subdirectory of our “data” directory of our working directory.

```{r}
save(pm, file = here::here("data", "wrangled", "wrangled_data.rda"))
readr::write_csv(pm, path = here::here("data","wrangled", "wrangled_data.csv"))
```

<!--
Replace `pm` with the name of the data object created at the end of data wrangling.
-->

***

# **Data Visualization**
***

If you have been following along but stopped, we could load our wrangled data like so:

```{r}
load(here::here("data", "wrangled", "wrangled_data.rda"))
```

***
<details> <summary> If you skipped the data import section click here. </summary>

An RDA file (stands for R data) of the data can be found [here](https://github.com//opencasestudies/ocs-bp-co2-emissions/tree/master/data/wrangled) or slightly more directly [here](https://raw.githubusercontent.com/opencasestudies/ocs-bp-co2-emissions/master/data/wrangled/wrangled_data.rda). Download this file and then place it in your current working directory within a subdirectory called "wrangled" within a subdirectory called "data" to use the following code. We used an RStudio project and the [`here` package](https://github.com/jennybc/here_here) to navigate to the file more easily.


```{r}
load(here::here("data", "wrangled", "wrangled_data.rda"))
```

</details>
***

<!--
Use this section to walk through step by step how the wrangled data was visualized.
Explain how these visualizations improve understanding and help extract insights.
-->

<!--
If any further wrangling was conducted in this section,
please save the most recent version of the data similar to previous sections.
-->

***

# **Data Analysis**
***

If you have been following along but stopped, we could load our wrangled data like so:

```{r}
load(here::here("data", "wrangled", "wrangled_data.rda"))
```

***
<details> <summary> If you skipped the data import section click here. </summary>

An RDA file (stands for R data) of the data can be found [here](https://github.com//opencasestudies/ocs-bp-co2-emissions/tree/master/data/wrangled) or slightly more directly [here](https://raw.githubusercontent.com/opencasestudies/ocs-bp-co2-emissions/master/data/wrangled/wrangled_data.rda). Download this file and then place it in your current working directory within a subdirectory called "wrangled" within a subdirectory called "data" to use the following code. We used an RStudio project and the [`here` package](https://github.com/jennybc/here_here) to navigate to the file more easily.


```{r}
load(here::here("data", "wrangled", "wrangled_data.rda"))
```

</details>
***

<!--
Use this section to walk through the methods and code used in the data analysis step-by-step.
Explain how this analysis helps answer the main questions posed earlier in the case study.
-->

***
